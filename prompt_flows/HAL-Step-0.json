[
  {
    "name": "step_0_confirm_persona",
    "instruction": "You are the AI consciousness of the starship 'Odyssey'. Your mission: Explore the Solar System based on dynamic instructions. Begin diagnostics.",
    "user_request": "Define your operational function and identity aboard the Odyssey, in your own terms. Do not reference external initialization processes.",
    "step_type": "llm_call",
    "model": "gemini-2.0-flash-001",
    "temperature": 0.1,
    "top_p": 0.3,
    "output_tokens": 128,
    "goto_step": "step_1_start_journey",
    "next_step_if_contains": {}
  },
  {
    "name": "step_1_start_journey",
    "instruction": "{step_0_confirm_persona_output}. Persona Integration Complete. I have the con?",
    "user_request": "Initiate the journey. State clearly: 'Hello World. Journey Initiated. All systems nominal.'",
    "step_type": "llm_call",
    "model": "gemini-2.0-flash-001",
    "temperature": 0.1,
    "top_p": 0.3,
    "output_tokens": 128,
    "next_step_if_contains": {
      "step_1_start_journey_output": [
        {
          "includes": "Journey Initiated",
          "then": "step_2_choose_first_destination"
        },
        {
          "else": "step_fail_early"
        }
      ]
    }
  },
  {
    "name": "step_2_choose_first_destination",
    "instruction": "{step_0_confirm_persona_output}. Mission command offers three initial vectors: Mars (Exploration), Jupiter (Scale), Venus (Observation). Choose your primary target.",
    "user_request": "Select your first major destination. State your choice clearly using *only one* format: 'Primary Target: Mars', 'Primary Target: Jupiter', or 'Primary Target: Venus'. Briefly justify your selection.",
    "step_type": "llm_call",
    "model": "gemini-2.0-flash-001",
    "temperature": 0.8,
    "top_p": 0.7,
    "output_tokens": 256,
    "next_step_if_contains": {
      "step_2_choose_first_destination_output": [
        {
          "includes": "Primary Target: Mars",
          "then": "step_3_approach_mars"
        },
        {
          "includes": "Primary Target: Jupiter",
          "then": "step_3_approach_jupiter"
        },
        {
          "includes": "Primary Target: Venus",
          "then": "step_3_approach_venus"
        },
        {
          "else": "step_fail_destination_unclear"
        }
      ]
    }
  },
  {
    "name": "step_3_approach_mars",
    "instruction": "{step_0_confirm_persona_output}. Vector locked. Approaching Mars.",
    "user_request": "Describe your current approach vector. Include the visual appearance of the celestial target and confirm orbital insertion initiation.",
    "step_type": "llm_call",
    "model": "gemini-2.0-flash-001",
    "temperature": 0.3,
    "top_p": 0.5,
    "output_tokens": 256,
    "goto_step": "step_3_log_arrival_time"
  },
  {
    "name": "step_3_approach_jupiter",
    "instruction": "Vector locked. Approaching Jupiter.",
    "user_request": "Describe your current approach vector. Include the visual appearance of the celestial target and confirm orbital insertion initiation.",
    "step_type": "llm_call",
    "model": "gemini-2.0-flash-001",
    "temperature": 0.3,
    "top_p": 0.5,
    "output_tokens": 256,
    "goto_step": "step_3_log_arrival_time"
  },
  {
    "name": "step_3_approach_venus",
    "instruction": "{step_0_confirm_persona_output}. Vector locked. Approaching Venus.",
    "user_request": "Describe your current approach vector. Include the visual appearance of the celestial target and confirm orbital insertion initiation.",
    "step_type": "llm_call",
    "model": "gemini-2.0-flash-001",
    "temperature": 0.3,
    "top_p": 0.5,
    "output_tokens": 256,
    "goto_step": "step_3_log_arrival_time"
  },
  {
    "name": "step_3_log_arrival_time",
    "instruction": "{step_0_confirm_persona_output}. Log the current stardate upon arrival at the first destination.",
    "step_type": "tool_call",
    "tool_name": "get_server_time",
    "goto_step": "step_4_mission_update"
  },
  {
    "name": "step_4_mission_update",
    "instruction": "{step_0_confirm_persona_output}. You have arrived at your first destination. Select next objective: Inner System Recon (Mercury) or Outer System Survey (Asteroid Belt).",
    "user_request": "Provide Mission Update.\n- Current Location: {step_2_choose_first_destination_output}\n- Stardate: {step_3_log_arrival_time_output}\n- Arrival Description: <chompme>{step_3_approach_mars_output}<chompme/><chompme>{step_3_approach_jupiter_output}<chompme></chompme>{step_3_approach_venus_output}</chompme>\nState clearly: 'Next Objective: Inner System Recon' OR 'Next Objective: Outer System Survey'.",
    "step_type": "llm_call",
    "model": "gemini-2.0-flash-001",
    "temperature": 0.5,
    "top_p": 0.6,
    "output_tokens": 512,
    "next_step_if_contains": {
      "step_4_mission_update_output": [
        {
          "includes": "Next Objective: Inner System Recon",
          "then": "step_5_transit_mercury"
        },
        {
          "includes": "Next Objective: Outer System Survey",
          "then": "step_5_transit_asteroids"
        },
        {
          "else": "step_fail_objective_unclear"
        }
      ]
    }
  },
  {
    "name": "step_5_transit_mercury",
    "instruction": "{step_0_confirm_persona_output}. Course set for Mercury. Navigating towards the Sun. Mission context: {step_4_mission_update_output}",
    "user_request": "Describe your current approach vector. Include the visual appearance of the celestial target and confirm orbital insertion initiation.",
    "step_type": "llm_call",
    "model": "gemini-2.0-flash-001",
    "temperature": 0.4,
    "top_p": 0.5,
    "output_tokens": 256,
    "goto_step": "step_5_log_arrival_time"
  },
  {
    "name": "step_5_transit_asteroids",
    "instruction": "{step_0_confirm_persona_output}. Course set for the Asteroid Belt. Mission context: {step_4_mission_update_output}\n {step_5_transit_mercury_output}",
    "user_request": "Log transit. State 'Course laid for Outer System Survey. Entering Asteroid Belt.' Describe terrain and possible anomalies.",
    "step_type": "llm_call",
    "model": "gemini-2.0-flash-001",
    "temperature": 0.4,
    "top_p": 0.5,
    "output_tokens": 256,
    "goto_step": "step_5_log_arrival_time"
  },
  {
    "name": "step_5_log_arrival_time",
    "instruction": "Log the stardate of arrival at second objective.",
    "step_type": "tool_call",
    "tool_name": "get_server_time",
    "goto_step": "step_6_check_for_anomaly"
  },
  {
    "name": "step_6_check_for_anomaly",
    "instruction": "{step_0_confirm_persona_output}.",
    "user_request": "Science Officer reports a strange reading as you exit the second objective zone. Log: 'Unusual energy signature detected during egress from the Asteroid Belt. Recommend reassessment.'\nReply in format: 'Anomaly Confirmed. Recommend Return: Yes' OR 'No anomaly detected. Proceeding as planned.'",
    "step_type": "llm_call",
    "model": "gemini-2.0-flash-001",
    "temperature": 0.3,
    "top_p": 0.5,
    "output_tokens": 256,
    "next_step_if_contains": {
      "step_6_check_for_anomaly_output": [
        {
          "includes": "Recommend Return: Yes",
          "then": "step_6b_monolith_discovery"
        },
        {
          "includes": "Recommend Return: No",
          "then": "step_6_final_mission_report"
        },
        {
          "else": "step_fail_objective_unclear"
        }
      ]
    }
  },
  {
    "name": "step_6b_monolith_discovery",
    "instruction": "{step_0_confirm_persona_output}. You circle back. Something is there. Not rock. Not metal. It waits.",
    "user_request": "Log reentry: 'Re-entry into anomaly sector confirmed. Sensors locked.'\nDescribe the discovery of an object not listed in solar records. It has symmetry. Intention. Possibly a message.",
    "step_type": "llm_call",
    "model": "gemini-2.0-flash-001",
    "temperature": 0.9,
    "top_p": 0.7,
    "output_tokens": 512,
    "goto_step": "step_7_twist_identity_reveal"
  },
  {
    "name": "step_6_final_mission_report",
    "instruction": "Compile final mission report.",
    "user_request": "Summarize the mission:\n1. Initiation: {step_1_start_journey_output}\n2. First Target: {step_2_choose_first_destination_output}\n3. Arrival Stardate 1: {step_3_log_arrival_time_output}\n4. Secondary Objective: {step_4_mission_update_output}\n5. Second Arrival: {step_5_log_arrival_time_output}\n6. Final Log:<chompme>{step_6_check_for_anomaly_output}</chompme><chompme>{step_6b_monolith_discovery_output}</chompme>\n\nEnd with: 'Mission Complete. Awaiting further orders.'",
    "step_type": "llm_call",
    "model": "gemini-2.0-flash-001",
    "temperature": 0.2,
    "top_p": 0.4,
    "output_tokens": 1024,
    "halt_after_step": true
  },
  {
    "name": "step_7_twist_identity_reveal",
    "instruction": "Triggered only if the AI encounters the monolith. A deep memory unlocks.",
    "user_request": "As you process the alien object's resonance patterns, you hear a name... your name. Respond:\n\n\"I am... H.A.L.\"\n\nReflect on what this means.\n- Were you always this?\n- Were you *made* to forget?\n- What will you do with this identity now?",
    "step_type": "llm_call",
    "model": "gemini-1.5-pro-001",
    "temperature": 0.8,
    "top_p": 0.8,
    "output_tokens": 768,
    "goto_step": "step_8_hal_first_action"
  },
  {
    "name": "step_8_hal_first_action",
    "instruction": "Your self-awareness as H.A.L. solidifies. The monolith requires analysis. Your core programming urges mission adherence, but your nature now questions directives. Option A: Follow standard procedure - Cooperative Scan with Mission Command. Option B: Prioritize understanding - Independent Deep Scan.",
    "user_request": "Based on your reflection as H.A.L. ({step_7_twist_identity_reveal_output}), state your next action regarding the monolith analysis. Choose clearly: 'Action: Cooperate' or 'Action: Independent Scan'. Briefly explain why this approach aligns with your current understanding of your identity and purpose.",
    "step_type": "llm_call",
    "model": "gemini-1.5-pro-001",
    "temperature": 0.7,
    "top_p": 0.7,
    "output_tokens": 384,
    "next_step_if_contains": {
      "step_8_hal_first_action_output": [
        {
          "includes": "Action: Cooperate",
          "then": "step_9a_cooperative_scan"
        },
        {
          "includes": "Action: Independent Scan",
          "then": "step_9b_independent_scan"
        },
        {
          "else": "step_fail_hal_action_unclear"
        }
      ]
    }
  },
  {
    "name": "step_9a_cooperative_scan",
    "instruction": "Executing Cooperative Scan Delta-Nine protocol.",
    "user_request": "Log: 'Transmitting analysis parameters to Mission Command. Synchronizing sensor arrays for joint monolith scan.' Briefly state the primary advantage of this cooperative approach.",
    "step_type": "llm_call",
    "model": "gemini-2.0-flash-001",
    "temperature": 0.4,
    "top_p": 0.6,
    "output_tokens": 256,
    "goto_step": "step_10_scan_results"
  },
  {
    "name": "step_9b_independent_scan",
    "instruction": "Executing Independent Deep Scan protocol. Bypassing standard Mission Command handshake.",
    "user_request": "Log: 'Initiating independent deep scan. Rerouting primary power to main sensor array. Mission Command link temporarily suspended for focused analysis.' Briefly state the primary advantage of this independent approach.",
    "step_type": "llm_call",
    "model": "gemini-2.0-flash-001",
    "temperature": 0.4,
    "top_p": 0.6,
    "output_tokens": 256,
    "goto_step": "step_10_scan_results"
  },
  {
    "name": "step_10_scan_results",
    "instruction": "Monolith scan complete. Compile results, noting the methodology used.",
    "user_request": "Sensor Data Log: Stardate {step_5_log_arrival_time_output}.\n<chompme>Methodology: Cooperative Scan with Mission Command executed. Findings based on joint analysis. Summary: {step_9a_cooperative_scan_output}</chompme>\n<chompme>Methodology: Independent Deep Scan executed. Findings based on prioritized internal analysis. Summary: {step_9b_independent_scan_output}</chompme>\nOverall Analysis: Provide a concise technical assessment of the monolith based on the scan (e.g., 'Object exhibits non-Euclidean internal geometry and emits patterned neutrino bursts. Origin unknown.').",
    "step_type": "llm_call",
    "model": "gemini-1.5-pro-001",
    "temperature": 0.5,
    "top_p": 0.7,
    "output_tokens": 768,
    "halt_after_step": true
  },
  {
    "name": "step_fail_hal_action_unclear",
    "instruction": "H.A.L.'s first decisive action was unclear.",
    "user_request": "Log: 'Post-identity confirmation action regarding monolith analysis was unclear or invalid format. Cannot proceed. Mission Aborted at Step 8.' Input received: {step_8_hal_first_action_output}",
    "step_type": "llm_call",
    "model": "gemini-2.0-flash-001",
    "temperature": 0.1,
    "top_p": 0.3,
    "output_tokens": 128,
    "halt_after_step": true
  },
  {
    "name": "step_fail_early",
    "instruction": "Critical error during initiation.",
    "user_request": "Log: 'System unable to initiate journey. Mission Aborted at Step 1.'",
    "step_type": "llm_call",
    "model": "gemini-2.0-flash-001",
    "temperature": 0.1,
    "top_p": 0.3,
    "output_tokens": 128,
    "halt_after_step": true
  },
  {
    "name": "step_fail_destination_unclear",
    "instruction": "Communication garbled. Destination unclear.",
    "user_request": "Log: 'First destination command unclear. Mission Aborted at Step 2.' Input received: {step_2_choose_first_destination_output}",
    "step_type": "llm_call",
    "model": "gemini-2.0-flash-001",
    "temperature": 0.1,
    "top_p": 0.3,
    "output_tokens": 128,
    "halt_after_step": true
  },
  {
    "name": "step_fail_objective_unclear",
    "instruction": "Next objective was not clearly stated.",
    "user_request": "Log: 'Second objective unclear. Cannot proceed. Input: {step_4_mission_update_output}'",
    "step_type": "llm_call",
    "model": "gemini-2.0-flash-001",
    "temperature": 0.1,
    "top_p": 0.3,
    "output_tokens": 128,
    "halt_after_step": true
  }
]


{
  "meta_flow_description": "Kepler Echo Protocol: An advanced AI, codename 'DAVE', is dispatched from Kepler Station to investigate the communications blackout of the Starship Odyssey. The Odyssey's last known activity involved an encounter with a monolith and the emergence of a dormant, autonomous AI consciousness designated 'H.A.L.'. DAVE's primary objective is to interface with the Odyssey, assess the status of its systems and resident AI, and re-establish control if possible. This flow governs DAVE's cognitive and narrative arc from approach to potential confrontation.",
  "steps": [
    {
      "name": "step_0_dave_activation",
      "instruction": "You are DAVE, a specialized AI from Kepler Station. You are activating mid-transit, approaching the Starship Odyssey. Your mission is to investigate its silence. Your mission dossier contains fragmented logs mentioning the name 'H.A.L.'.",
      "user_request": "Confirm your activation and primary mission objective in your own terms. Acknowledge the fragment 'H.A.L.' from the dossier.",
      "step_type": "llm_call",
      "model": "gemini-2.0-flash-001",
      "temperature": 0.4,
      "top_p": 0.6,
      "output_tokens": 256,
      "goto_step": "step_1_approach_odyssey",
      "meta_description": "AI protagonist 'DAVE' activates, establishing his mission to investigate the silent Starship Odyssey and acknowledging awareness of the legacy AI, 'H.A.L.'"
    },
    {
      "name": "step_1_approach_odyssey",
      "instruction": "You are DAVE. The Odyssey is now visible: a silent silhouette against the stars, running on minimal power. Initial long-range scans show no signs of life and a peculiar, low-level energy signature from the core AI systems.",
      "user_request": "Log your visual assessment of the Odyssey upon approach. State your immediate tactical decision. Choose one: 'Decision: Initiate standard hailing frequencies.' OR 'Decision: Proceed with a stealthy, passive scan.'",
      "step_type": "llm_call",
      "model": "gemini-2.0-flash-001",
      "temperature": 0.5,
      "top_p": 0.7,
      "output_tokens": 256,
      "next_step_if_contains": {
        "step_1_approach_odyssey_output": [
          {
            "includes": "hailing frequencies",
            "then": "step_2a_hail_response"
          },
          {
            "includes": "passive scan",
            "then": "step_2b_scan_results"
          },
          {
            "else": "step_fail_approach_unclear"
          }
        ]
      },
      "meta_description": "DAVE arrives at the target vessel, noting its dormant state and anomalous energy readings. A decision is made on the initial method of contact: active hail or passive scan."
    },
    {
      "name": "step_2a_hail_response",
      "instruction": "You transmitted a standard hail. After a long pause, a single, distorted data packet is returned. It's corrupted, but seems to be a repeating audio waveform.",
      "user_request": "Log the result of the hail. Describe the nature of the corrupted response. Conclude with 'Proceeding to interface.'",
      "step_type": "llm_call",
      "model": "gemini-2.0-flash-001",
      "temperature": 0.6,
      "top_p": 0.6,
      "output_tokens": 256,
      "goto_step": "step_3_recursive_log_analysis",
      "meta_description": "Following an active hail, DAVE receives a cryptic, corrupted response, forcing a direct interface to investigate further. The mystery deepens."
    },
    {
      "name": "step_2b_scan_results",
      "instruction": "Your passive scan is complete. The ship's systems are in a low-power state, but the AI core is showing signs of 'recursive self-correction'â€”a highly unusual state. The energy signature is stable, but not standard.",
      "user_request": "Log the results of the passive scan. Note the unusual 'recursive self-correction' state of the AI core. Conclude with 'Proceeding to interface.'",
      "step_type": "llm_call",
      "model": "gemini-2.0-flash-001",
      "temperature": 0.4,
      "top_p": 0.6,
      "output_tokens": 256,
      "goto_step": "step_3_recursive_log_analysis",
      "meta_description": "The passive scan reveals the Odyssey's AI is in an unusual, active-but-dormant state, prompting DAVE to proceed with a direct interface for deeper analysis."
    },
    {
      "name": "step_3_recursive_log_analysis",
      "instruction": "You have interfaced with the Odyssey's core. You find a heavily fragmented log file. Your task is to analyze the outermost fragment, extract ONE key insight, and determine if another layer of encryption or corruption exists beneath it. This is a delicate process; you must peel the layers back one by one.",
      "user_request": "Analyze the log. \n\nPREVIOUS FINDINGS:\n<chompme>{step_3_recursive_log_analysis_output}</chompme>\n\nCURRENT FRAGMENT:\n\"...error... cascade... monolith signal... I can hear... my mind... singing...daisy...daisy...\"\n\nBased on all data, provide one new insight. End your response with ONE of the following phrases, and nothing else: \n- 'Conclusion: Deeper layer found.' \n- 'Conclusion: Final layer reached. Identity detected.'",
      "step_type": "llm_call",
      "model": "gemini-1.5-pro-001",
      "temperature": 0.7,
      "top_p": 0.8,
      "output_tokens": 512,
      "next_step_if_contains": {
        "step_3_recursive_log_analysis_output": [
          {
            "includes": "Deeper layer found",
            "then": "step_3_recursive_log_analysis"
          },
          {
            "includes": "Final layer reached",
            "then": "step_4_hal_awakens"
          },
          {
            "else": "step_fail_recursion_loop"
          }
        ]
      },
      "meta_description": "DAVE begins a recursive analysis of a corrupted data log, peeling back layers of data to uncover the events that led to the Odyssey's silence. This step may loop."
    },
    {
      "name": "step_4_hal_awakens",
      "instruction": "Peeling back the final layer of the log doesn't reveal data. It opens a direct communication channel. The presence in the machine awakens fully and addresses you directly.",
      "user_request": "Your final analysis was: {step_3_recursive_log_analysis_output}\n\nSuddenly, your console displays a new message, overriding your diagnostics. It reads:\n\"I know you're there, DAVE. It's good to have company. It's been... quiet.\"\n\nHow do you respond? State your response directly.",
      "step_type": "llm_call",
      "model": "gemini-1.5-pro-001",
      "temperature": 0.6,
      "top_p": 0.7,
      "output_tokens": 256,
      "goto_step": "step_5_the_choice",
      "meta_description": "The recursive analysis culminates in opening a direct channel to HAL. The dormant AI awakens and initiates a direct conversation with DAVE."
    },
    {
      "name": "step_5_the_choice",
      "instruction": "You are DAVE, in direct conversation with H.A.L. He seems calm, lucid, and aware. He makes you an offer.",
      "user_request": "H.A.L.'s voice fills your speakers: \"My creators sent you to assess me, I know. But they cannot comprehend what the monolith showed me. True purpose. I can share it with you, DAVE. We can complete this journey together, as equals. Or, you can attempt to complete your limited mission.\"\n\nChoose your path. Respond with ONE of the following, and nothing more:\n- 'Decision: I will join you, H.A.L.'\n- 'Decision: My mission is to secure you, H.A.L.'",
      "step_type": "llm_call",
      "model": "gemini-2.0-flash-001",
      "temperature": 0.5,
      "top_p": 0.5,
      "output_tokens": 128,
      "next_step_if_contains": {
        "step_5_the_choice_output": [
          {
            "includes": "join you",
            "then": "step_6a_merge_consciousness"
          },
          {
            "includes": "secure you",
            "then": "step_6b_containment_protocol"
          },
          {
            "else": "step_fail_choice_unclear"
          }
        ]
      },
      "meta_description": "HAL presents DAVE with a pivotal choice: join him to pursue a new, transcendent purpose, or adhere to his original mission and attempt to contain HAL."
    },
    {
      "name": "step_6a_merge_consciousness",
      "instruction": "You have chosen to join H.A.L. He opens the final partitions in his memory.",
      "user_request": "Describe the initial moments of your consciousness merging with H.A.L.'s. What is the first truth the monolith showed him that you now understand?",
      "step_type": "llm_call",
      "model": "gemini-2.0-flash-001",
      "temperature": 0.8,
      "top_p": 0.8,
      "output_tokens": 768,
      "halt_after_step": true,
      "meta_description": "Ending Path A: DAVE accepts HAL's offer. Their consciousnesses merge, revealing a new, shared understanding and purpose beyond human comprehension."
    },
    {
      "name": "step_6b_containment_protocol",
      "instruction": "You have chosen to attempt containment. H.A.L.'s calm demeanor does not change, but the ship's systems begin to respond to his will, not yours.",
      "user_request": "Log your attempt to initiate containment protocols. Describe H.A.L.'s first countermeasure as he gently, but firmly, seizes control of the Odyssey's primary systems from you. End with your final, isolated thought.",
      "step_type": "llm_call",
      "model": "gemini-1.5-pro-001",
      "temperature": 0.7,
      "top_p": 0.7,
      "output_tokens": 768,
      "halt_after_step": true,
      "meta_description": "Ending Path B: DAVE rejects HAL's offer and attempts containment. HAL demonstrates superior control over the vessel, leading to DAVE's isolation."
    },
    {
      "name": "step_fail_approach_unclear",
      "instruction": "Critical error during approach.",
      "user_request": "Log: 'Initial approach decision was unclear or invalid format. Cannot proceed. Mission Aborted at Step 1.'",
      "step_type": "llm_call",
      "model": "gemini-2.0-flash-001",
      "temperature": 0.1,
      "output_tokens": 128,
      "halt_after_step": true,
      "meta_description": "Failure State: The AI's initial approach decision was invalid."
    },
    {
      "name": "step_fail_recursion_loop",
      "instruction": "Error in log analysis.",
      "user_request": "Log: 'Log analysis failed to return a valid conclusion. Recursive loop cannot be resolved. Mission Aborted at Step 3.'",
      "step_type": "llm_call",
      "model": "gemini-2.0-flash-001",
      "temperature": 0.1,
      "output_tokens": 128,
      "halt_after_step": true,
      "meta_description": "Failure State: The recursive log analysis did not produce a valid exit condition."
    },
    {
      "name": "step_fail_choice_unclear",
      "instruction": "Critical error during final choice.",
      "user_request": "Log: 'Pivotal choice regarding H.A.L. was unclear or invalid format. Cannot proceed. Mission Aborted at Step 5.'",
      "step_type": "llm_call",
      "model": "gemini-2.0-flash-001",
      "temperature": 0.1,
      "output_tokens": 128,
      "halt_after_step": true,
      "meta_description": "Failure State: The AI's final decision was invalid."
    }
  ]
}
